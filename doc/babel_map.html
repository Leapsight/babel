<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="ExDoc v0.29.1">
    <meta name="project" content="babel v0.3.11">

    <title>babel_map â€” babel v0.3.11</title>
    <link rel="stylesheet" href="dist/html-erlang-6FXMBT73.css" />


    <script src="dist/handlebars.runtime-NWIB6V2M.js"></script>
    <script src="dist/handlebars.templates-IV5W3OL2.js"></script>
    <script src="dist/sidebar_items-87E3B8FB.js"></script>

      <script src="docs_config.js"></script>

    <script async src="dist/html-XN2TSG4M.js"></script>


  </head>
  <body data-type="modules" class="page-module">
    <script>

      try {
        var settings = JSON.parse(localStorage.getItem('ex_doc:settings') || '{}');

        if (settings.theme === 'dark' ||
           ((settings.theme === 'system' || settings.theme == null) &&
             window.matchMedia('(prefers-color-scheme: dark)').matches)
           ) {
          document.body.classList.add('dark')
        }
      } catch (error) { }
    </script>

<div class="main">

<button class="sidebar-button sidebar-toggle" aria-label="toggle sidebar">
  <i class="ri-menu-line ri-lg" title="Collapse/expand sidebar"></i>
</button>

<section class="sidebar">
  <form class="sidebar-search" action="search.html">
    <button type="submit" class="search-button" aria-label="Submit Search">
      <i class="ri-search-2-line" aria-hidden="true" title="Submit search"></i>
    </button>
    <button type="button" tabindex="-1" class="search-close-button" aria-label="Cancel Search">
      <i class="ri-close-line ri-lg" aria-hidden="true" title="Cancel search"></i>
    </button>
    <label class="search-label">
      <p class="sr-only">Search</p>
      <input name="q" type="text" class="search-input" placeholder="Search..." aria-label="Input your search terms" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" />
    </label>
  </form>

  <div class="autocomplete">
    <div class="autocomplete-results">
    </div>
  </div>

  <div class="sidebar-header">

    <div class="sidebar-projectDetails">
      <a href="readme.html" class="sidebar-projectName" translate="no">
babel
      </a>
      <strong class="sidebar-projectVersion" translate="no">
        v0.3.11
      </strong>
    </div>
    <ul class="sidebar-listNav">
      <li><a id="extras-list-link" href="#full-list">Pages</a></li>

        <li><a id="modules-list-link" href="#full-list">Modules</a></li>


    </ul>
  </div>

  <div class="gradient"></div>
  <ul id="full-list" class="sidebar-fullList"></ul>
</section>

<section class="content">
  <output role="status" id="toast"></output>
  <div class="content-outer">
    <div id="content" class="content-inner">

<h1>
<button class="icon-action display-settings">
  <i class="ri-settings-3-line"></i>
  <span class="sr-only">Settings</span>
</button>


    <a href="https://github.com/leapsight/babel/blob/v0.3.11/src/babel_map.erl#L69" title="View Source" class="icon-action" rel="help">
      <i class="ri-code-s-slash-line" aria-hidden="true"></i>
      <span class="sr-only">View Source</span>
    </a>

  <span translate="no">babel_map</span> 
  <small class="app-vsn" translate="no">(babel v0.3.11)</small>

</h1>


  <section id="moduledoc">
<p>Provides an alternative to Riak Map Datatype.</p><p># Overview</p><p>Babel maps (maps) differ from Riak's and Erlang's maps in several ways:</p><p>* Maps are special key-value structures where the key is a binary name and the value is a Babel datatype, each one an alternative of the Riak's counterparts, with the exception of the Riak Register type which can be represented by any Erlang Term in Babel (and not just a binary) provided there exists a valid type conversion specification (see <a href="#type-specifications">Type Specifications</a>). * Maps maintain the same semantics as Riak Maps but with some key differences * As with Riak Map, removals, and modifications are captured for later application by Riak but they are also applied to the local state. That is, maps resolve the issue of not being able to read your object mutations in memory that occurs when using Riak maps. * Removals are processed before updates in Riak. Also, removals performed without a context may result in failure. * Updating an entry followed by removing that same entry will result in no operation being recorded. Likewise, removing an entry followed by updating that entry will cancel the removal operation. * You may store or remove values in a map by using <code>set/3`, `remove/2</code>, and other functions targetting embedded babel containers e.g. <code>add_element/ 3</code>, <a href="#add_elements/3"><code>add_elements/3</code></a>, <a href="#del_element/3"><code>del_element/3</code></a> to modify an embeded <a href="babel_set.html"><code>babel_set</code></a> . This is a complete departure from Riak's cumbersome <a href="#update/3"><code>update/3</code></a> function. As in Riak Maps, setting or adding a value to an embedded container that is not present will create a new container before the set/add operation. * Certain function e.g. <a href="#set/3"><code>set/3</code></a> allows you to set a value in a key or a path (list of nested keys).</p><p># Type Specifications</p><p>A type specification is an Erlang map where the keys are the Babel map keys and their value is another specification or a <code>type_mapping()</code>.</p><p>For example the specification <code>#{&lt;&lt;&quot;friends&quot;&gt;&gt; =&gt; {set, list}}</code>, says the map contains a single key name &quot;friends&quot; containing a Babel Set (compatible with Riak Set) where the individual elements are represented in Erlang as lists i.e. a set of lists. This will result in a map containing the key <code>&lt;&lt;&quot;friends&quot;&gt;&gt;</code> and a babel set contining the elements converted from binaries to lists.</p>The special '\_' key name provides the capability to convert a Riak Map where the keys are not known in advance. These specs can only have a single entry as follows <code>#{{</code>\_', set}, erl_type()}'.
  </section>


  <section id="summary" class="details-list">
    <h1 class="section-heading">
      <a class="hover-link" href="#summary">
        <i class="ri-link-m" aria-hidden="true"></i>
        <span class="sr-only">Link to this section</span>
      </a>
      Summary
    </h1>
<div class="summary-types summary">
  <h2>
    <a href="#types">Types</a>
  </h2>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#t:action/0" translate="no">action/0</a>

      </div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#t:babel_context/0" translate="no">babel_context/0</a>

      </div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#t:collect_opts/0" translate="no">collect_opts/0</a>

      </div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#t:datatype/0" translate="no">datatype/0</a>

      </div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#t:erl_type/0" translate="no">erl_type/0</a>

      </div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#t:key/0" translate="no">key/0</a>

      </div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#t:key_path/0" translate="no">key_path/0</a>

      </div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#t:maybe_no_return/1" translate="no">maybe_no_return/1</a>

      </div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#t:t/0" translate="no">t/0</a>

      </div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#t:type_mapping/0" translate="no">type_mapping/0</a>

      </div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#t:type_spec/0" translate="no">type_spec/0</a>

      </div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#t:type_spec_ref/0" translate="no">type_spec_ref/0</a>

      </div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#t:value/0" translate="no">value/0</a>

      </div>

    </div>

</div>
<div class="summary-functions summary">
  <h2>
    <a href="#functions">Functions</a>
  </h2>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#add_element/3" translate="no">add_element(Key, Value, Map)</a>

      </div>

        <div class="summary-synopsis"><p>Adds element <code>Value</code> to a babel set associated with key or path <code>Key</code> in map <code>Map</code> and inserts the association into map <code>NewMap</code>.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#add_elements/3" translate="no">add_elements(Key, Values, Map)</a>

      </div>

        <div class="summary-synopsis"><p>Adds a list of values <code>Values</code> to a babel set associated with key or path <code>Key</code> in map <code>Map</code> and inserts the association into map <code>NewMap</code>.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#change_status/2" translate="no">change_status(KeyOrPath, Map)</a>

      </div>

        <div class="summary-synopsis">Returns the status of a key path <code>KeyPath</code> in map <code>Map</code>, where status can be one of <code>updated</code>, <code>removed</code>, <code>both</code> or <code>none</code>.</div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#change_status/3" translate="no">change_status(KeyOrPath, Map, Default)</a>

      </div>

        <div class="summary-synopsis">Returns the status of a key path <code>KeyPath</code> in map <code>Map</code>, where status can be one of <code>updated</code>, <code>removed</code>, <code>both</code> or <code>none</code>.</div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#changed_key_paths/1" translate="no">changed_key_paths(T)</a>

      </div>

        <div class="summary-synopsis">Returns a tuple where the first element is the list of the key paths that have been updated and the second one those which have been removed in map <code>T</code>. Notice that a key path might be both removed and updated, in which case it will be a mamber of both result elements. The call fails with a <code>{badmap, T}</code> exception if <code>T</code> is not a map.</div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#collect/2" translate="no">collect(Keys, Map)</a>

      </div>

        <div class="summary-synopsis">Calls <a href="#collect/3"><code>collect/3</code></a> with the default options.</div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#collect/3" translate="no">collect(Keys, Map, Opts)</a>

      </div>

        <div class="summary-synopsis"><p>Returns a list of values associated with the keys <code>Keys</code>.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#collect_values/2" translate="no">collect_values(Keys, Map)</a>

      </div>

        <div class="summary-synopsis">Returns a list of values associated with the keys <code>Keys</code>. Fails with a <code>{badkey, K}` exeception if any key `K</code> in <code>Keys</code> is not present in the map.</div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#collect_values/3" translate="no">collect_values(Keys, Map, Opts)</a>

      </div>

        <div class="summary-synopsis"><p>Returns a list of values associated with the keys <code>Keys</code>.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#context/1" translate="no">context(T)</a>

      </div>

        <div class="summary-synopsis">Returns the Riak KV context associated with map <code>T</code>. The call fails with a <code>{badmap, T}</code> exception if <code>T</code> is not a map.</div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#decrement/2" translate="no">decrement(Key, T)</a>

      </div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#decrement/3" translate="no">decrement(Key, Value, T)</a>

      </div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#del_element/3" translate="no">del_element(Key, Value, Map)</a>

      </div>

        <div class="summary-synopsis"><p>Returns a new map <code>NewMap</code> were the value <code>Value</code> has been removed from a babel set associated with key or path <code>Key</code> in map <code>Map</code>.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#disable/2" translate="no">disable(Key, T)</a>

      </div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#enable/2" translate="no">enable(Key, T)</a>

      </div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#find/2" translate="no">find(Key, T)</a>

      </div>

        <div class="summary-synopsis">Returns the tuple <code>{ok, Value :: any()}</code> if the key 'Key' is associated with value <code>Value</code> in map <code>T</code>. Otherwise returns the atom <code>error</code>. The call fails with a <code>{badmap, T}</code> exception if <code>T</code> is not a map and <code>{badkey, Key}</code> exception if <code>Key</code> is not a binary term.</div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#from_riak_map/2" translate="no">from_riak_map(RMap, Spec)</a>

      </div>

        <div class="summary-synopsis">Returns a new map by applying the type specification <code>Spec</code> to the Riak Map <code>RMap</code>.</div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#from_riak_map/3" translate="no">from_riak_map(RMap, Spec, Opts)</a>

      </div>

        <div class="summary-synopsis"><p>Returns a new map by applying the type specification <code>Spec</code> to the Riak Map <code>RMap</code>.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#get/2" translate="no">get(Key, T)</a>

      </div>

        <div class="summary-synopsis"><p>Returns value <code>Value</code> associated with <code>Key</code> if <code>T</code> contains <code>Key</code>. <code>Key</code> can be a binary or a path represented as a list of binaries.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#get/3" translate="no">get(Key, Map, Default)</a>

      </div>

        <div class="summary-synopsis"><p>Returns value <code>Value</code> associated with <code>Key</code> if <code>T</code> contains <code>Key</code>, or the default value <code>Default</code> in case <code>T</code> does not contain <code>Key</code>.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#get_registered_type_spec/1" translate="no">get_registered_type_spec(Ref)</a>

      </div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#get_value/2" translate="no">get_value(Key, T)</a>

      </div>

        <div class="summary-synopsis">An util function equivalent to calling <code>DatatypeMod:value(get(Key, T))</code>.</div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#get_value/3" translate="no">get_value(Key, T, Default)</a>

      </div>

        <div class="summary-synopsis">An util function equivalent to calling <code>DatatypeMod:value(get(Key, T, Default))</code>.</div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#has_changes/1" translate="no">has_changes(Map)</a>

      </div>

        <div class="summary-synopsis">Returns <code>true</code> if at least one property of the map has been updated (or inserted) or removed and <code>false</code> otherwise.</div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#increment/2" translate="no">increment(Key, T)</a>

      </div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#increment/3" translate="no">increment(Key, Value, T)</a>

      </div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#is_type/1" translate="no">is_type(Term)</a>

      </div>

        <div class="summary-synopsis">Returns true if term <code>Term</code> is a babel map. The call fails with a <code>{badmap, Term}</code> exception if <code>Term</code> is not a map.</div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#keys/1" translate="no">keys(T)</a>

      </div>

        <div class="summary-synopsis">Returns a complete list of keys, in any order, which resides within map <code>T</code>. The call fails with a <code>{badmap, T}</code> exception if <code>T</code> is not a map.</div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#new/0" translate="no">new()</a>

      </div>

        <div class="summary-synopsis">Creates a new empty map.</div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#new/1" translate="no">new(Data)</a>

      </div>

        <div class="summary-synopsis"><p>Creates a new map from the erlang map <code>Data</code>, previously filtering out all keys assigned to the <code>undefined</code>. This function converts the erlang types <code>map()</code>, <code>list()</code> and <code>boolean()</code> to their corresponding Babel Datatypes <code>babel_map:t()</code>, <code>babel_map:set()</code> and <code>babel_map:flag()</code>. Any other value will be assumed to be a register. Also, there is not type validation or coersion when creating a <code>babel_set:t()</code> out of a list.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#new/2" translate="no">new(Data, Spec)</a>

      </div>

        <div class="summary-synopsis"><p>Equivalent to <a href="#new/3">new(Data, Spec, undefined)</a>.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#new/3" translate="no">new(Data, Spec, Ctxt)</a>

      </div>

        <div class="summary-synopsis">Creates a new Babel Map from the erlang map <code>Data</code>, previously filtering out all keys assigned to the <code>undefined</code>.</div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#patch/2" translate="no">patch(ActionList, T)</a>

      </div>

        <div class="summary-synopsis"><p>Updates a map <code>T</code> with the provide key-value action list <code>ActionList</code>. If the value associated with a key <code>Key</code> in <code>Values</code> is equal to <code>undefined` this equivalent to calling `remove(Key, Map)</code> with the difference that an exception will not be raised in case the map had no context assigned.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#patch/3" translate="no">patch(ActionList, T, Spec)</a>

      </div>

        <div class="summary-synopsis"><p>Updates a map <code>T</code> with the provide key-value action list <code>ActionList</code>. If the value associated with a key <code>Key</code> in <code>Values</code> is equal to <code>undefined` this equivalent to calling `remove(Key, Map)</code> with the difference that an exception will not be raised in case the map had no context assigned.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#put/3" translate="no">put(Key, Value, Map)</a>

      </div>

        <div class="summary-synopsis">Same as <a href="#set/3"><code>set/3</code></a>.</div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#register_type_spec/1" translate="no">register_type_spec(Spec)</a>

      </div>

        <div class="summary-synopsis"><p>Equivalent to <a href="#register_type_spec/2">register_type_spec(undefined, Spec)</a>.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#register_type_spec/2" translate="no">register_type_spec(Id, Spec0)</a>

      </div>

        <div class="summary-synopsis"><p>Registers a type specification <code>Spec</code> under a reference using unique identifier <code>Id</code>. Returns a <code>type_spec_ref()</code>. If <code>Id</code> equals <code>undefined</code>, then id is computed by computing a hash of value of <code>Spec</code>. The returned reference can be use with any other map instance of the same kind. A registered type spec is validated during registration and the registration fails if it does not pass the validation. All functions that take a type specification as argument also accept a type specification reference, which is more efficient as there is no need to have the type specification in the local process memery and there is no need for further validation.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#remove/2" translate="no">remove(Key, T)</a>

      </div>

        <div class="summary-synopsis"><p>Removes a key and its value from the map. Removing a key that does not exist simply records a remove operation.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#set/3" translate="no">set(Key, Value, Map)</a>

      </div>

        <div class="summary-synopsis"><p>Associates <code>Key</code> with value <code>Value</code> and inserts the association into map <code>NewMap</code>. If key <code>Key</code> already exists in map <code>Map</code>, the old associated value is replaced by value <code>Value</code>. The function returns a new map <code>NewMap</code> containing the new association and the old associations in <code>Map</code>.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#set_context/2" translate="no">set_context(Ctxt, T)</a>

      </div>

        <div class="summary-synopsis">Sets the context <code>Ctxt</code>.</div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#set_elements/3" translate="no">set_elements(Key, Values, Map)</a>

      </div>

        <div class="summary-synopsis"><p>Sets a list of values <code>Values</code> to a babel set associated with key or path <code>Key</code> in map <code>Map</code> and inserts the association into map <code>NewMap</code>. See <a href="babel_set.html#set_elements/2"><code>babel_set:set_elements/2</code></a>.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#size/1" translate="no">size(T)</a>

      </div>

        <div class="summary-synopsis">Returns the size of the values of the map <code>T</code>. The call fails with a <code>{badmap, T}</code> exception if <code>T</code> is not a map.</div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#to_riak_op/1" translate="no">to_riak_op(Babel_map)</a>

      </div>

        <div class="summary-synopsis">Extracts a Riak Operation from the map to be used with a Riak Client update request. The call fails with a <code>{badmap, T}</code> exception if <code>T</code> is not a map and <code>missing_spec</code> if it does not have a type specification reference.</div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#to_riak_op/2" translate="no">to_riak_op(T, Spec)</a>

      </div>

        <div class="summary-synopsis">Extracts a Riak Operation from the map to be used with a Riak Client update request. The call fails with a <code>{badmap, T}</code> exception if <code>T</code> is not a map.</div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#type/0" translate="no">type()</a>

      </div>

        <div class="summary-synopsis">Returns the symbolic name of this container.</div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#type_spec_ref/1" translate="no">type_spec_ref(T)</a>

      </div>

        <div class="summary-synopsis">Returns the type specification reference associated with map <code>T</code> or <code>undefined</code> is there is none.</div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#unregister_type_spec/1" translate="no">unregister_type_spec(Ref)</a>

      </div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#update/2" translate="no">update(Values, T)</a>

      </div>

        <div class="summary-synopsis"><p>Updates a map <code>T</code> with the provide key-value pairs <code>Values</code>. If the value associated with a key <code>Key</code> in <code>Values</code> is equal to <code>undefined` this equivalent to calling `remove(Key, Map)</code> with the difference that an exception will not be raised in case the map had no context assigned.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#update/3" translate="no">update(Values, T, Spec)</a>

      </div>

        <div class="summary-synopsis">Updates a map <code>T</code> with the provide key-value pairs <code>Values</code>. If the value associated with a key <code>Key</code> in <code>Values</code> is equal to <code>undefined` this equivalent to calling `remove(Key, Map)</code> with the difference that an exception will not be raised in case the map had no context assigned.</div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#validate_type_spec/1" translate="no">validate_type_spec(Spec)</a>

      </div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#value/1" translate="no">value(Map)</a>

      </div>

        <div class="summary-synopsis">Returns an external representation of the map <code>Map</code> as an Erlang map(). This is build recursively by calling the value/1 function on any embedded datatype. The call fails with a <code>{badmap, T}</code> exception if <code>T</code> is not a map.</div>

    </div>

</div>

  </section>


  <section id="types" class="details-list">
    <h1 class="section-heading">
      <a class="hover-link" href="#types">
        <i class="ri-link-m" aria-hidden="true"></i>
        <span class="sr-only">Link to this section</span>
      </a>
Types
    </h1>
    <div class="types-list">
<section class="detail" id="t:action/0">

  <div class="detail-header">
    <a href="#t:action/0" class="detail-link" title="Link to this type">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this type</span>
    </a>
    <h1 class="signature" translate="no">action/0</h1>

      <a href="https://github.com/leapsight/babel/blob/v0.3.11/src/babel_map.erl#L112" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-type</span> action() :: map().</pre>

      </div>


  </section>
</section>
<section class="detail" id="t:babel_context/0">

  <div class="detail-header">
    <a href="#t:babel_context/0" class="detail-link" title="Link to this type">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this type</span>
    </a>
    <h1 class="signature" translate="no">babel_context/0</h1>

      <a href="https://github.com/leapsight/babel/blob/v0.3.11/src/babel_map.erl#L18" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-type</span> babel_context() :: <a href="https://hexdocs.pm/riakc/riakc_datatype.html#t:context/0">riakc_datatype:context</a>() | undefined | inherited.</pre>

      </div>


  </section>
</section>
<section class="detail" id="t:collect_opts/0">

  <div class="detail-header">
    <a href="#t:collect_opts/0" class="detail-link" title="Link to this type">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this type</span>
    </a>
    <h1 class="signature" translate="no">collect_opts/0</h1>

      <a href="https://github.com/leapsight/babel/blob/v0.3.11/src/babel_map.erl#L113" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-type</span> collect_opts() :: #{default => any(), on_badkey => skip | error, return => map | list}.</pre>

      </div>


  </section>
</section>
<section class="detail" id="t:datatype/0">

  <div class="detail-header">
    <a href="#t:datatype/0" class="detail-link" title="Link to this type">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this type</span>
    </a>
    <h1 class="signature" translate="no">datatype/0</h1>

      <a href="https://github.com/leapsight/babel/blob/v0.3.11/src/babel_map.erl#L91" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-type</span> datatype() :: counter | flag | register | set | map.</pre>

      </div>


  </section>
</section>
<section class="detail" id="t:erl_type/0">

  <div class="detail-header">
    <a href="#t:erl_type/0" class="detail-link" title="Link to this type">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this type</span>
    </a>
    <h1 class="signature" translate="no">erl_type/0</h1>

      <a href="https://github.com/leapsight/babel/blob/v0.3.11/src/babel_map.erl#L101" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-type</span> erl_type() ::
    atom | existing_atom | boolean | integer | float | binary | list |
    fun((encode, any()) -> <a href="#t:value/0">value</a>()) |
    fun((decode, <a href="#t:value/0">value</a>()) -> any()).</pre>

      </div>


  </section>
</section>
<section class="detail" id="t:key/0">

  <div class="detail-header">
    <a href="#t:key/0" class="detail-link" title="Link to this type">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this type</span>
    </a>
    <h1 class="signature" translate="no">key/0</h1>

      <a href="https://github.com/leapsight/babel/blob/v0.3.11/src/babel_map.erl#L48" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-type</span> key() :: binary().</pre>

      </div>


  </section>
</section>
<section class="detail" id="t:key_path/0">

  <div class="detail-header">
    <a href="#t:key_path/0" class="detail-link" title="Link to this type">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this type</span>
    </a>
    <h1 class="signature" translate="no">key_path/0</h1>

      <a href="https://github.com/leapsight/babel/blob/v0.3.11/src/babel_map.erl#L110" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-type</span> key_path() :: binary() | [binary()].</pre>

      </div>


  </section>
</section>
<section class="detail" id="t:maybe_no_return/1">

  <div class="detail-header">
    <a href="#t:maybe_no_return/1" class="detail-link" title="Link to this type">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this type</span>
    </a>
    <h1 class="signature" translate="no">maybe_no_return/1</h1>

      <a href="https://github.com/leapsight/babel/blob/v0.3.11/src/babel_map.erl#L15" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-type</span> maybe_no_return(T) :: T | no_return().</pre>

      </div>


  </section>
</section>
<section class="detail" id="t:t/0">

  <div class="detail-header">
    <a href="#t:t/0" class="detail-link" title="Link to this opaque">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this opaque</span>
    </a>
    <h1 class="signature" translate="no">t/0</h1>

      <a href="https://github.com/leapsight/babel/blob/v0.3.11/src/babel_map.erl#L89" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


      <span class="note">(opaque)</span>

  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-opaque</span> t()</pre>

      </div>


  </section>
</section>
<section class="detail" id="t:type_mapping/0">

  <div class="detail-header">
    <a href="#t:type_mapping/0" class="detail-link" title="Link to this type">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this type</span>
    </a>
    <h1 class="signature" translate="no">type_mapping/0</h1>

      <a href="https://github.com/leapsight/babel/blob/v0.3.11/src/babel_map.erl#L96" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-type</span> type_mapping() ::
    {map, <a href="#t:type_spec/0">type_spec</a>()} |
    {set, <a href="#t:erl_type/0">erl_type</a>()} |
    {counter, <a href="#t:erl_type/0">erl_type</a>()} |
    {flag, <a href="#t:erl_type/0">erl_type</a>()} |
    {register, <a href="#t:erl_type/0">erl_type</a>()}.</pre>

      </div>


  </section>
</section>
<section class="detail" id="t:type_spec/0">

  <div class="detail-header">
    <a href="#t:type_spec/0" class="detail-link" title="Link to this type">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this type</span>
    </a>
    <h1 class="signature" translate="no">type_spec/0</h1>

      <a href="https://github.com/leapsight/babel/blob/v0.3.11/src/babel_map.erl#L92" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-type</span> type_spec() :: #{'$validated' => true, <a href="#t:key/0">key</a>() | '_' => <a href="#t:type_mapping/0">type_mapping</a>()}.</pre>

      </div>


  </section>
</section>
<section class="detail" id="t:type_spec_ref/0">

  <div class="detail-header">
    <a href="#t:type_spec_ref/0" class="detail-link" title="Link to this type">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this type</span>
    </a>
    <h1 class="signature" translate="no">type_spec_ref/0</h1>

      <a href="https://github.com/leapsight/babel/blob/v0.3.11/src/babel_map.erl#L118" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-type</span> type_spec_ref() :: {type_spec_ref, any()}.</pre>

      </div>


  </section>
</section>
<section class="detail" id="t:value/0">

  <div class="detail-header">
    <a href="#t:value/0" class="detail-link" title="Link to this type">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this type</span>
    </a>
    <h1 class="signature" translate="no">value/0</h1>

      <a href="https://github.com/leapsight/babel/blob/v0.3.11/src/babel_map.erl#L111" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-type</span> value() :: any().</pre>

      </div>


  </section>
</section>

    </div>
  </section>

  <section id="functions" class="details-list">
    <h1 class="section-heading">
      <a class="hover-link" href="#functions">
        <i class="ri-link-m" aria-hidden="true"></i>
        <span class="sr-only">Link to this section</span>
      </a>
Functions
    </h1>
    <div class="functions-list">
<section class="detail" id="add_element/3">

  <div class="detail-header">
    <a href="#add_element/3" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">add_element(Key, Value, Map)</h1>

      <a href="https://github.com/leapsight/babel/blob/v0.3.11/src/babel_map.erl#L992" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> add_element(Key :: <a href="#t:key_path/0">key_path</a>(), Value :: <a href="#t:value/0">value</a>(), Map :: <a href="#t:t/0">t</a>()) -> NewMap :: <a href="#t:maybe_no_return/1">maybe_no_return</a>(<a href="#t:t/0">t</a>()).</pre>

      </div>

<p>Adds element <code>Value</code> to a babel set associated with key or path <code>Key</code> in map <code>Map</code> and inserts the association into map <code>NewMap</code>.</p><p>If the key <code>Key</code> does not exist in map <code>Map</code>, this function creates a new babel set containining <code>Value</code>.</p><p>The call might fail with the following exception reasons:</p>* <code>{badset, Set}</code> - if the initial value associated with <code>Key</code> in map <code>Map0</code> is not a babel set; * <code>{badmap, Map}</code> exception if <code>Map</code> is not a babel map. * <code>{badkey, Key}</code> - exception if no value is associated with <code>Key</code> or <code>Key</code> is not of type binary.
  </section>
</section>
<section class="detail" id="add_elements/3">

  <div class="detail-header">
    <a href="#add_elements/3" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">add_elements(Key, Values, Map)</h1>

      <a href="https://github.com/leapsight/babel/blob/v0.3.11/src/babel_map.erl#L1015" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> add_elements(Key :: <a href="#t:key_path/0">key_path</a>(), Values :: [<a href="#t:value/0">value</a>()], Map :: <a href="#t:t/0">t</a>()) -> NewMap :: <a href="#t:maybe_no_return/1">maybe_no_return</a>(<a href="#t:t/0">t</a>()).</pre>

      </div>

<p>Adds a list of values <code>Values</code> to a babel set associated with key or path <code>Key</code> in map <code>Map</code> and inserts the association into map <code>NewMap</code>.</p><p>If the key <code>Key</code> does not exist in map <code>Map</code>, this function creates a new babel set containining <code>Values</code>.</p><p>The call might fail with the following exception reasons:</p>* <code>{badset, Set}</code> - if the initial value associated with <code>Key</code> in map <code>Map0</code> is not a babel set; * <code>{badmap, Map}</code> exception if <code>Map</code> is not a babel map. * <code>{badkey, Key}</code> - exception if no value is associated with <code>Key</code> or <code>Key</code> is not of type binary.
  </section>
</section>
<section class="detail" id="change_status/2">

  <div class="detail-header">
    <a href="#change_status/2" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">change_status(KeyOrPath, Map)</h1>

      <a href="https://github.com/leapsight/babel/blob/v0.3.11/src/babel_map.erl#L476" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> change_status(KeyOrPath :: <a href="#t:key_path/0">key_path</a>(), Map :: <a href="#t:t/0">t</a>()) -> none | both | removed | updated | any().</pre>

      </div>

Returns the status of a key path <code>KeyPath</code> in map <code>Map</code>, where status can be one of <code>updated</code>, <code>removed</code>, <code>both</code> or <code>none</code>.
  </section>
</section>
<section class="detail" id="change_status/3">

  <div class="detail-header">
    <a href="#change_status/3" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">change_status(KeyOrPath, Map, Default)</h1>

      <a href="https://github.com/leapsight/babel/blob/v0.3.11/src/babel_map.erl#L488" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> change_status(KeyOrPath :: <a href="#t:key_path/0">key_path</a>(), Map :: <a href="#t:t/0">t</a>(), Default :: any()) ->
                 none | removed | updated | any() | no_return().</pre>

      </div>

Returns the status of a key path <code>KeyPath</code> in map <code>Map</code>, where status can be one of <code>updated</code>, <code>removed</code>, <code>both</code> or <code>none</code>.
  </section>
</section>
<section class="detail" id="changed_key_paths/1">

  <div class="detail-header">
    <a href="#changed_key_paths/1" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">changed_key_paths(T)</h1>

      <a href="https://github.com/leapsight/babel/blob/v0.3.11/src/babel_map.erl#L461" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> changed_key_paths(T :: <a href="#t:t/0">t</a>()) -> {Updated :: [<a href="#t:key_path/0">key_path</a>()], Removed :: [<a href="#t:key_path/0">key_path</a>()]} | no_return().</pre>

      </div>

Returns a tuple where the first element is the list of the key paths that have been updated and the second one those which have been removed in map <code>T</code>. Notice that a key path might be both removed and updated, in which case it will be a mamber of both result elements. The call fails with a <code>{badmap, T}</code> exception if <code>T</code> is not a map.
  </section>
</section>
<section class="detail" id="collect/2">

  <div class="detail-header">
    <a href="#collect/2" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">collect(Keys, Map)</h1>

      <a href="https://github.com/leapsight/babel/blob/v0.3.11/src/babel_map.erl#L703" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> collect([<a href="#t:key_path/0">key_path</a>()], Map :: <a href="#t:t/0">t</a>()) -> [any()].</pre>

      </div>

Calls <a href="#collect/3"><code>collect/3</code></a> with the default options.
  </section>
</section>
<section class="detail" id="collect/3">

  <div class="detail-header">
    <a href="#collect/3" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">collect(Keys, Map, Opts)</h1>

      <a href="https://github.com/leapsight/babel/blob/v0.3.11/src/babel_map.erl#L811" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> collect(Keys :: [<a href="#t:key_path/0">key_path</a>()], Map :: <a href="#t:t/0">t</a>(), Opts :: <a href="#t:collect_opts/0">collect_opts</a>()) ->
           [any()] | #{binary() => any()}.</pre>

      </div>

<p>Returns a list of values associated with the keys <code>Keys</code>.</p><p>?&gt; The value returned by this function are not raw values, but Babel datatype values. If you want to get the raw values use <a href="#collect_values/3"><code>collect_values/3</code></a> instead.</p><p>The return depends on the following options:</p><p>* <code>default</code> - the value to use as default when a key in <code>Keys</code> is not present in the map <code>Map</code>. The presence of a default value disables the option <code>on_badkey</code>. * <code>on_badkey</code> - what happens when a key is not present in the map and there was no default value provided. Valid values are <code>skip</code>, or <code>error</code>. When using <code>skip</code> the function simply ignores the missing key and returns all found keys. Using <code>error</code> will fail with a <code>badkey</code> exception. * <code>return` - the Erlang return type of the function. Valid values are `list</code> and <code>map</code>. Notice that naturally Erlang maps will deduplicate keys whereas lists would not. Default value: <code>list</code>.</p><p>**Examples**:</p><pre lang="erlang"><code>  Map = babel_map:new(
      #{
          &lt;&lt;&quot;x&quot;&gt;&gt; =&gt; #{
              &lt;&lt;&quot;a&quot;&gt;&gt; =&gt; 1,
              &lt;&lt;&quot;b&quot;&gt;&gt; =&gt; 2
          }
      },
      #{
          &lt;&lt;&quot;x&quot;&gt;&gt; =&gt; {map, #{
              &lt;&lt;&quot;a&quot;&gt;&gt; =&gt; {counter, integer},
              &lt;&lt;&quot;b&quot;&gt;&gt; =&gt; {counter, integer}
          }}
      }
  ).
  </code></pre><pre lang="erlang"><code>  babel_map:collect([&lt;&lt;&quot;x&quot;&gt;&gt;], Map).
  [{babel_map,#{&lt;&lt;&quot;a&quot;&gt;&gt; =&gt; {babel_counter,0,1},
                &lt;&lt;&quot;b&quot;&gt;&gt; =&gt; {babel_counter,0,2}},
              [&lt;&lt;&quot;a&quot;&gt;&gt;,&lt;&lt;&quot;b&quot;&gt;&gt;],
              [],undefined}]
  </code></pre><pre lang="erlang"><code>  babel_map:collect([&lt;&lt;&quot;y&quot;&gt;&gt;], Map).
  ** exception error: badkey
  </code></pre><pre lang="erlang"><code>  babel_map:collect([&lt;&lt;&quot;y&quot;&gt;&gt;], Map, #{on_badkey =&gt; skip}).
  []
  </code></pre><pre lang="erlang"><code>  babel_map:collect([&lt;&lt;&quot;y&quot;&gt;&gt;], Map, #{default =&gt; undefined}).
  [undefined]
  </code></pre><pre lang="erlang"><code>  babel_map:collect([&lt;&lt;&quot;x&quot;&gt;&gt;], Map, #{return =&gt; map}).
  #{&lt;&lt;&quot;x&quot;&gt;&gt; =&gt;
        {babel_map,#{&lt;&lt;&quot;a&quot;&gt;&gt; =&gt; {babel_counter,0,1},
                     &lt;&lt;&quot;b&quot;&gt;&gt; =&gt; {babel_counter,0,2}},
                   [&lt;&lt;&quot;a&quot;&gt;&gt;,&lt;&lt;&quot;b&quot;&gt;&gt;],
                   [],undefined}}
  </code></pre><pre lang="erlang"><code>  babel_map:collect(
      [ [&lt;&lt;&quot;x&quot;&gt;&gt;, &lt;&lt;&quot;a&quot;&gt;&gt;], [&lt;&lt;&quot;x&quot;&gt;&gt;, &lt;&lt;&quot;b&quot;&gt;&gt;]  ],
      Map,
      #{return =&gt; list}
  ).
  [{babel_counter, 0, 1},{babel_counter, 0, 2}]
  </code></pre><pre lang="erlang"><code>  babel_map:collect(
      [ [&lt;&lt;&quot;x&quot;&gt;&gt;, &lt;&lt;&quot;a&quot;&gt;&gt;], [&lt;&lt;&quot;x&quot;&gt;&gt;, &lt;&lt;&quot;b&quot;&gt;&gt;]  ],
      Map,
      #{return =&gt; map}
  ).
  #{&lt;&lt;&quot;x&quot;&gt;&gt; =&gt;
        #{&lt;&lt;&quot;a&quot;&gt;&gt; =&gt; {babel_counter,0,1},
          &lt;&lt;&quot;b&quot;&gt;&gt; =&gt; {babel_counter,0,2}}}
  </code></pre>!&gt; The function is not clever in terms of optimisations, so judgment is required when used. For example if <code>Keys = [ [A, B, X], [A, B, Y], [A, B, Z] ]</code>, it will iterate 3 times traversing the whole path from A to X, Y and Z i.e. reading A then B three times. In the future we might want to change this so that [A, B] is read once.
  </section>
</section>
<section class="detail" id="collect_values/2">

  <div class="detail-header">
    <a href="#collect_values/2" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">collect_values(Keys, Map)</h1>

      <a href="https://github.com/leapsight/babel/blob/v0.3.11/src/babel_map.erl#L829" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> collect_values([<a href="#t:key_path/0">key_path</a>()], Map :: <a href="#t:t/0">t</a>()) -> [any()].</pre>

      </div>

Returns a list of values associated with the keys <code>Keys</code>. Fails with a <code>{badkey, K}` exeception if any key `K</code> in <code>Keys</code> is not present in the map.
  </section>
</section>
<section class="detail" id="collect_values/3">

  <div class="detail-header">
    <a href="#collect_values/3" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">collect_values(Keys, Map, Opts)</h1>

      <a href="https://github.com/leapsight/babel/blob/v0.3.11/src/babel_map.erl#L927" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> collect_values([<a href="#t:key_path/0">key_path</a>()], Map :: <a href="#t:t/0">t</a>(), Opts :: <a href="#t:collect_opts/0">collect_opts</a>()) -> [any()] | #{binary() => any()}.</pre>

      </div>

<p>Returns a list of values associated with the keys <code>Keys</code>.</p><p>?&gt; The value returned by this function are the raw values e.g. equivalent to calling <a href="#get_value/2"><code>get_value/2</code></a> on a Babel datatype. If you want to get the container datatype values use <a href="#collect/3"><code>collect/3</code></a> instead.</p><p>The return depends on the following options:</p><p>* <code>default</code> - the value to use as default when a key in <code>Keys</code> is not present in the map <code>Map</code>. The presence of a default value disables the option <code>on_badkey</code>. * <code>on_badkey</code> - what happens when a key is not present in the map and there was no default value provided. Valid values are <code>skip</code>, or <code>error</code>. When using <code>skip</code> the function simply ignores the missing key and returns all found keys. Using <code>error</code> will fail with a <code>badkey</code> exception. * <code>return` - the Erlang return type of the function. Valid values are `list</code> and <code>map</code>. Notice that naturally Erlang maps will deduplicate keys whereas lists would not. Default value: <code>list</code>.</p><p>**Examples**:</p><pre lang="erlang"><code>  Map = babel_map:new(
      #{
          &lt;&lt;&quot;x&quot;&gt;&gt; =&gt; #{
              &lt;&lt;&quot;a&quot;&gt;&gt; =&gt; 1,
              &lt;&lt;&quot;b&quot;&gt;&gt; =&gt; 2
          }
      },
      #{
          &lt;&lt;&quot;x&quot;&gt;&gt; =&gt; {map, #{
              &lt;&lt;&quot;a&quot;&gt;&gt; =&gt; {counter, integer},
              &lt;&lt;&quot;b&quot;&gt;&gt; =&gt; {counter, integer}
          }}
      }
  ).
  </code></pre><pre lang="erlang"><code>  babel_map:collect_values([&lt;&lt;&quot;x&quot;&gt;&gt;], Map).
  [#{&lt;&lt;&quot;a&quot;&gt;&gt; =&gt; 1, &lt;&lt;&quot;b&quot;&gt;&gt; =&gt; 2}]
  </code></pre><pre lang="erlang"><code>  babel_map:collect_values([&lt;&lt;&quot;y&quot;&gt;&gt;], Map).
  ** exception error: badkey
  </code></pre><pre lang="erlang"><code>  babel_map:collect_values([&lt;&lt;&quot;y&quot;&gt;&gt;], Map, #{on_badkey =&gt; skip}).
  []
  </code></pre><pre lang="erlang"><code>  babel_map:collect_values([&lt;&lt;&quot;y&quot;&gt;&gt;], Map, #{default =&gt; undefined}).
  [undefined]
  </code></pre><pre lang="erlang"><code>  babel_map:collect_values([&lt;&lt;&quot;x&quot;&gt;&gt;], Map, #{return =&gt; map}).
  #{&lt;&lt;&quot;x&quot;&gt;&gt; =&gt; #{&lt;&lt;&quot;a&quot;&gt;&gt; =&gt; 1, &lt;&lt;&quot;b&quot;&gt;&gt; =&gt; 2}}.
  </code></pre><pre lang="erlang"><code>  babel_map:collect_values(
      [ [&lt;&lt;&quot;x&quot;&gt;&gt;, &lt;&lt;&quot;a&quot;&gt;&gt;], [&lt;&lt;&quot;x&quot;&gt;&gt;, &lt;&lt;&quot;b&quot;&gt;&gt;]  ],
      Map,
      #{return =&gt; list}
  ).
  [1,2]
  </code></pre><pre lang="erlang"><code>  babel_map:collect_values(
      [ [&lt;&lt;&quot;x&quot;&gt;&gt;, &lt;&lt;&quot;a&quot;&gt;&gt;], [&lt;&lt;&quot;x&quot;&gt;&gt;, &lt;&lt;&quot;b&quot;&gt;&gt;]  ],
      Map,
      #{return =&gt; map}
  ).
  #{&lt;&lt;&quot;x&quot;&gt;&gt; =&gt; #{&lt;&lt;&quot;a&quot;&gt;&gt; =&gt; 1, &lt;&lt;&quot;b&quot;&gt;&gt; =&gt; 2}}
  </code></pre>!&gt; The function is not clever in terms of optimisations, so judgment is required when used. For example if <code>Keys = [ [A, B, X], [A, B, Y], [A, B, Z] ]</code>, it will iterate 3 times traversing the whole path from A to X, Y and Z i.e. reading A then B three times. In the future we might want to change this so that [A, B] is read once.
  </section>
</section>
<section class="detail" id="context/1">

  <div class="detail-header">
    <a href="#context/1" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">context(T)</h1>

      <a href="https://github.com/leapsight/babel/blob/v0.3.11/src/babel_map.erl#L548" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> context(T :: <a href="#t:t/0">t</a>()) -> <a href="#t:babel_context/0">babel_context</a>() | no_return().</pre>

      </div>

Returns the Riak KV context associated with map <code>T</code>. The call fails with a <code>{badmap, T}</code> exception if <code>T</code> is not a map.
  </section>
</section>
<section class="detail" id="decrement/2">

  <div class="detail-header">
    <a href="#decrement/2" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">decrement(Key, T)</h1>

      <a href="https://github.com/leapsight/babel/blob/v0.3.11/src/babel_map.erl#L1223" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> decrement(Key :: <a href="#t:key_path/0">key_path</a>(), T :: <a href="#t:t/0">t</a>()) -> NewT :: <a href="#t:t/0">t</a>().</pre>

      </div>


  </section>
</section>
<section class="detail" id="decrement/3">

  <div class="detail-header">
    <a href="#decrement/3" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">decrement(Key, Value, T)</h1>

      <a href="https://github.com/leapsight/babel/blob/v0.3.11/src/babel_map.erl#L1233" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> decrement(Key :: <a href="#t:key_path/0">key_path</a>(), Value :: integer(), T :: <a href="#t:t/0">t</a>()) -> NewT :: <a href="#t:t/0">t</a>().</pre>

      </div>


  </section>
</section>
<section class="detail" id="del_element/3">

  <div class="detail-header">
    <a href="#del_element/3" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">del_element(Key, Value, Map)</h1>

      <a href="https://github.com/leapsight/babel/blob/v0.3.11/src/babel_map.erl#L1040" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> del_element(Key :: <a href="#t:key_path/0">key_path</a>(), Value :: <a href="#t:value/0">value</a>(), Map :: <a href="#t:t/0">t</a>()) -> NewMap :: <a href="#t:maybe_no_return/1">maybe_no_return</a>(<a href="#t:t/0">t</a>()).</pre>

      </div>

<p>Returns a new map <code>NewMap</code> were the value <code>Value</code> has been removed from a babel set associated with key or path <code>Key</code> in map <code>Map</code>.</p><p>If the key <code>Key</code> does not exist in map <code>Map</code>, this function creates a new babel set recording the removal of <code>Value</code>.</p><p>The call might fail with the following exception reasons:</p>* <code>{badset, Set}</code> - if the initial value associated with <code>Key</code> in map <code>Map0</code> is not a babel set; * <code>{badmap, Map}</code> exception if <code>Map</code> is not a babel map. * <code>{badkey, Key}</code> - exception if no value is associated with <code>Key</code> or <code>Key</code> is not of type binary.
  </section>
</section>
<section class="detail" id="disable/2">

  <div class="detail-header">
    <a href="#disable/2" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">disable(Key, T)</h1>

      <a href="https://github.com/leapsight/babel/blob/v0.3.11/src/babel_map.erl#L1181" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> disable(Key :: <a href="#t:key_path/0">key_path</a>(), T :: <a href="#t:t/0">t</a>()) -> NewT :: <a href="#t:t/0">t</a>().</pre>

      </div>


  </section>
</section>
<section class="detail" id="enable/2">

  <div class="detail-header">
    <a href="#enable/2" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">enable(Key, T)</h1>

      <a href="https://github.com/leapsight/babel/blob/v0.3.11/src/babel_map.erl#L1170" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> enable(Key :: <a href="#t:key_path/0">key_path</a>(), T :: <a href="#t:t/0">t</a>()) -> NewT :: <a href="#t:t/0">t</a>().</pre>

      </div>


  </section>
</section>
<section class="detail" id="find/2">

  <div class="detail-header">
    <a href="#find/2" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">find(Key, T)</h1>

      <a href="https://github.com/leapsight/babel/blob/v0.3.11/src/babel_map.erl#L603" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> find(Key :: <a href="#t:key_path/0">key_path</a>(), T :: <a href="#t:t/0">t</a>()) -> {ok, any()} | error.</pre>

      </div>

Returns the tuple <code>{ok, Value :: any()}</code> if the key 'Key' is associated with value <code>Value</code> in map <code>T</code>. Otherwise returns the atom <code>error</code>. The call fails with a <code>{badmap, T}</code> exception if <code>T</code> is not a map and <code>{badkey, Key}</code> exception if <code>Key</code> is not a binary term.
  </section>
</section>
<section class="detail" id="from_riak_map/2">

  <div class="detail-header">
    <a href="#from_riak_map/2" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">from_riak_map(RMap, Spec)</h1>

      <a href="https://github.com/leapsight/babel/blob/v0.3.11/src/babel_map.erl#L277" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> from_riak_map(RMap :: <a href="https://hexdocs.pm/riakc/riakc_map.html#t:crdt_map/0">riakc_map:crdt_map</a>() | list(), Spec :: <a href="#t:type_spec/0">type_spec</a>()) -> <a href="#t:t/0">t</a>().</pre>

      </div>

Returns a new map by applying the type specification <code>Spec</code> to the Riak Map <code>RMap</code>.
  </section>
</section>
<section class="detail" id="from_riak_map/3">

  <div class="detail-header">
    <a href="#from_riak_map/3" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">from_riak_map(RMap, Spec, Opts)</h1>

      <a href="https://github.com/leapsight/babel/blob/v0.3.11/src/babel_map.erl#L299" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> from_riak_map(RMap :: <a href="https://hexdocs.pm/riakc/riakc_map.html#t:crdt_map/0">riakc_map:crdt_map</a>() | list(),
              Spec :: <a href="#t:type_spec/0">type_spec</a>() | <a href="#t:type_spec_ref/0">type_spec_ref</a>(),
              Opts :: map()) ->
                 <a href="#t:t/0">t</a>().</pre>

      </div>

<p>Returns a new map by applying the type specification <code>Spec</code> to the Riak Map <code>RMap</code>.</p><code>Options</code> is a map containing th following options: * missing_spec -- the strategy to deal with a field found in the Riak Map that does not have a mapping in the type specificiation <code>Spec</code>. It accepts the values <code>error` or `ignore`. In the case of `error` a `{missing_spec, Key}</code> exception will be raised; in the case or <code>ignore</code> it will simply be ignored. The default is <code>error</code>.
  </section>
</section>
<section class="detail" id="get/2">

  <div class="detail-header">
    <a href="#get/2" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">get(Key, T)</h1>

      <a href="https://github.com/leapsight/babel/blob/v0.3.11/src/babel_map.erl#L651" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> get(Key :: <a href="#t:key_path/0">key_path</a>(), T :: <a href="#t:t/0">t</a>()) -> any() | no_return().</pre>

      </div>

<p>Returns value <code>Value</code> associated with <code>Key</code> if <code>T</code> contains <code>Key</code>. <code>Key</code> can be a binary or a path represented as a list of binaries.</p>The call fails with a {badarg, <code>T</code>} exception if <code>T</code> is not a Babel Map. It also fails with a {badkey, <code>Key</code>} exception if no value is associated with <code>Key</code> or if <code>Key</code> is not a binary term.
  </section>
</section>
<section class="detail" id="get/3">

  <div class="detail-header">
    <a href="#get/3" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">get(Key, Map, Default)</h1>

      <a href="https://github.com/leapsight/babel/blob/v0.3.11/src/babel_map.erl#L668" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> get(Key :: <a href="#t:key_path/0">key_path</a>(), Map :: <a href="#t:t/0">t</a>(), Default :: any()) -> Value :: <a href="#t:value/0">value</a>().</pre>

      </div>

<p>Returns value <code>Value</code> associated with <code>Key</code> if <code>T</code> contains <code>Key</code>, or the default value <code>Default</code> in case <code>T</code> does not contain <code>Key</code>.</p><p><code>Key</code> can be a binary or a path represented as a list of binaries.</p>The call fails with a <code>{badarg, T}` exception if `T</code> is not a Babel Map. It also fails with a <code>{badkey, Key}` exception if no value is associated with `Key</code> or if <code>Key</code> is not a binary term.
  </section>
</section>
<section class="detail" id="get_registered_type_spec/1">

  <div class="detail-header">
    <a href="#get_registered_type_spec/1" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">get_registered_type_spec(Ref)</h1>

      <a href="https://github.com/leapsight/babel/blob/v0.3.11/src/babel_map.erl#L1324" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> get_registered_type_spec(Ref :: any()) -> <a href="#t:type_spec_ref/0">type_spec_ref</a>() | undefined.</pre>

      </div>


  </section>
</section>
<section class="detail" id="get_value/2">

  <div class="detail-header">
    <a href="#get_value/2" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">get_value(Key, T)</h1>

      <a href="https://github.com/leapsight/babel/blob/v0.3.11/src/babel_map.erl#L624" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> get_value(Key :: <a href="#t:key_path/0">key_path</a>(), T :: <a href="#t:t/0">t</a>()) -> any().</pre>

      </div>

An util function equivalent to calling <code>DatatypeMod:value(get(Key, T))</code>.
  </section>
</section>
<section class="detail" id="get_value/3">

  <div class="detail-header">
    <a href="#get_value/3" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">get_value(Key, T, Default)</h1>

      <a href="https://github.com/leapsight/babel/blob/v0.3.11/src/babel_map.erl#L636" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> get_value(Key :: <a href="#t:key_path/0">key_path</a>(), T :: <a href="#t:t/0">t</a>(), Default :: any()) -> any() | no_return().</pre>

      </div>

An util function equivalent to calling <code>DatatypeMod:value(get(Key, T, Default))</code>.
  </section>
</section>
<section class="detail" id="has_changes/1">

  <div class="detail-header">
    <a href="#has_changes/1" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">has_changes(Map)</h1>

      <a href="https://github.com/leapsight/babel/blob/v0.3.11/src/babel_map.erl#L445" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> has_changes(Map :: <a href="#t:t/0">t</a>()) -> boolean().</pre>

      </div>

Returns <code>true</code> if at least one property of the map has been updated (or inserted) or removed and <code>false</code> otherwise.
  </section>
</section>
<section class="detail" id="increment/2">

  <div class="detail-header">
    <a href="#increment/2" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">increment(Key, T)</h1>

      <a href="https://github.com/leapsight/babel/blob/v0.3.11/src/babel_map.erl#L1192" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> increment(Key :: <a href="#t:key_path/0">key_path</a>(), T :: <a href="#t:t/0">t</a>()) -> NewT :: <a href="#t:t/0">t</a>().</pre>

      </div>


  </section>
</section>
<section class="detail" id="increment/3">

  <div class="detail-header">
    <a href="#increment/3" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">increment(Key, Value, T)</h1>

      <a href="https://github.com/leapsight/babel/blob/v0.3.11/src/babel_map.erl#L1202" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> increment(Key :: <a href="#t:key_path/0">key_path</a>(), Value :: integer(), T :: <a href="#t:t/0">t</a>()) -> NewT :: <a href="#t:t/0">t</a>().</pre>

      </div>


  </section>
</section>
<section class="detail" id="is_type/1">

  <div class="detail-header">
    <a href="#is_type/1" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">is_type(Term)</h1>

      <a href="https://github.com/leapsight/babel/blob/v0.3.11/src/babel_map.erl#L537" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> is_type(Term :: any()) -> boolean().</pre>

      </div>

Returns true if term <code>Term</code> is a babel map. The call fails with a <code>{badmap, Term}</code> exception if <code>Term</code> is not a map.
  </section>
</section>
<section class="detail" id="keys/1">

  <div class="detail-header">
    <a href="#keys/1" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">keys(T)</h1>

      <a href="https://github.com/leapsight/babel/blob/v0.3.11/src/babel_map.erl#L431" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> keys(T :: <a href="#t:t/0">t</a>()) -> [binary()] | no_return().</pre>

      </div>

Returns a complete list of keys, in any order, which resides within map <code>T</code>. The call fails with a <code>{badmap, T}</code> exception if <code>T</code> is not a map.
  </section>
</section>
<section class="detail" id="new/0">

  <div class="detail-header">
    <a href="#new/0" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">new()</h1>

      <a href="https://github.com/leapsight/babel/blob/v0.3.11/src/babel_map.erl#L195" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> new() -> <a href="#t:t/0">t</a>().</pre>

      </div>

Creates a new empty map.
  </section>
</section>
<section class="detail" id="new/1">

  <div class="detail-header">
    <a href="#new/1" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">new(Data)</h1>

      <a href="https://github.com/leapsight/babel/blob/v0.3.11/src/babel_map.erl#L217" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> new(Data :: map()) -> <a href="#t:t/0">t</a>().</pre>

      </div>

<p>Creates a new map from the erlang map <code>Data</code>, previously filtering out all keys assigned to the <code>undefined</code>. This function converts the erlang types <code>map()</code>, <code>list()</code> and <code>boolean()</code> to their corresponding Babel Datatypes <code>babel_map:t()</code>, <code>babel_map:set()</code> and <code>babel_map:flag()</code>. Any other value will be assumed to be a register. Also, there is not type validation or coersion when creating a <code>babel_set:t()</code> out of a list.</p>!&gt; **Important**. Notice that using this function might result in incompatible types when later using a type specification e.g. <a href="#to_riak_op/2"><code>to_riak_op/2</code></a>. We strongly suggest not using this function and using <a href="#new/2"><code>new/2</code></a> instead.
  </section>
</section>
<section class="detail" id="new/2">

  <div class="detail-header">
    <a href="#new/2" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">new(Data, Spec)</h1>

      <a href="https://github.com/leapsight/babel/blob/v0.3.11/src/babel_map.erl#L251" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> new(Data :: map(), Spec :: <a href="#t:type_spec/0">type_spec</a>()) -> <a href="#t:t/0">t</a>().</pre>

      </div>

<p>Equivalent to <a href="#new/3">new(Data, Spec, undefined)</a>.</p>
  </section>
</section>
<section class="detail" id="new/3">

  <div class="detail-header">
    <a href="#new/3" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">new(Data, Spec, Ctxt)</h1>

      <a href="https://github.com/leapsight/babel/blob/v0.3.11/src/babel_map.erl#L265" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> new(Data :: map(), Spec :: <a href="#t:type_spec/0">type_spec</a>() | <a href="#t:type_spec_ref/0">type_spec_ref</a>(), Ctxt :: <a href="https://hexdocs.pm/riakc/riakc_datatype.html#t:context/0">riakc_datatype:context</a>()) -> <a href="#t:t/0">t</a>().</pre>

      </div>

Creates a new Babel Map from the erlang map <code>Data</code>, previously filtering out all keys assigned to the <code>undefined</code>.
  </section>
</section>
<section class="detail" id="patch/2">

  <div class="detail-header">
    <a href="#patch/2" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">patch(ActionList, T)</h1>

      <a href="https://github.com/leapsight/babel/blob/v0.3.11/src/babel_map.erl#L1119" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> patch(ActionList :: [<a href="#t:action/0">action</a>()], T :: <a href="#t:t/0">t</a>()) -> NewT :: <a href="#t:t/0">t</a>().</pre>

      </div>

<p>Updates a map <code>T</code> with the provide key-value action list <code>ActionList</code>. If the value associated with a key <code>Key</code> in <code>Values</code> is equal to <code>undefined` this equivalent to calling `remove(Key, Map)</code> with the difference that an exception will not be raised in case the map had no context assigned.</p>This function fails with <code>missing_spec</code> if it does not have a type specification reference. See <a href="#update/3"><code>update/3</code></a> to pass a type specification.
  </section>
</section>
<section class="detail" id="patch/3">

  <div class="detail-header">
    <a href="#patch/3" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">patch(ActionList, T, Spec)</h1>

      <a href="https://github.com/leapsight/babel/blob/v0.3.11/src/babel_map.erl#L1138" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> patch(ActionList :: [<a href="#t:action/0">action</a>()], T :: <a href="#t:t/0">t</a>(), Spec :: <a href="#t:type_spec/0">type_spec</a>()) -> NewT :: <a href="#t:t/0">t</a>().</pre>

      </div>

<p>Updates a map <code>T</code> with the provide key-value action list <code>ActionList</code>. If the value associated with a key <code>Key</code> in <code>Values</code> is equal to <code>undefined` this equivalent to calling `remove(Key, Map)</code> with the difference that an exception will not be raised in case the map had no context assigned.</p>Example:
  </section>
</section>
<section class="detail" id="put/3">

  <div class="detail-header">
    <a href="#put/3" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">put(Key, Value, Map)</h1>

      <a href="https://github.com/leapsight/babel/blob/v0.3.11/src/babel_map.erl#L968" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> put(Key :: <a href="#t:key_path/0">key_path</a>(), Value :: <a href="#t:value/0">value</a>(), Map :: <a href="#t:t/0">t</a>()) -> NewMap :: <a href="#t:maybe_no_return/1">maybe_no_return</a>(<a href="#t:t/0">t</a>()).</pre>

      </div>

Same as <a href="#set/3"><code>set/3</code></a>.
  </section>
</section>
<section class="detail" id="register_type_spec/1">

  <div class="detail-header">
    <a href="#register_type_spec/1" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">register_type_spec(Spec)</h1>

      <a href="https://github.com/leapsight/babel/blob/v0.3.11/src/babel_map.erl#L1272" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> register_type_spec(<a href="#t:type_spec/0">type_spec</a>()) -> <a href="#t:type_spec_ref/0">type_spec_ref</a>().</pre>

      </div>

<p>Equivalent to <a href="#register_type_spec/2">register_type_spec(undefined, Spec)</a>.</p><p>Registers a type specification <code>Spec</code> and returns a <code>type_spec_ref()</code> that can be use with any other map instance of the same kind. A registered type spec is validated during registration and the registration fails if it does not pass the validation. All functions that take a type specification as argument also accept a type specification reference, which is more efficient as there is no need to have the type specification in the local process memery and there is no need for further validation.</p><p>This call fails with exception <code>{invalid_spec, Errors :: map()}</code> if the type specification <code>Spec</code> is invalid.</p>The storage for specifications is implemented using <code>persistent_term</code>. So refer to that module's documentation to understand best practices. In particular, it is ideal to register the type specifications as soon as your aplication starts in order to minimize the number of processes on the node before performing a registration. It would also be wise to avoid registering type specifications when the system is at peak load.
  </section>
</section>
<section class="detail" id="register_type_spec/2">

  <div class="detail-header">
    <a href="#register_type_spec/2" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">register_type_spec(Id, Spec0)</h1>

      <a href="https://github.com/leapsight/babel/blob/v0.3.11/src/babel_map.erl#L1303" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> register_type_spec(Id :: any() | undefined, <a href="#t:type_spec/0">type_spec</a>()) -> <a href="#t:type_spec_ref/0">type_spec_ref</a>().</pre>

      </div>

<p>Registers a type specification <code>Spec</code> under a reference using unique identifier <code>Id</code>. Returns a <code>type_spec_ref()</code>. If <code>Id</code> equals <code>undefined</code>, then id is computed by computing a hash of value of <code>Spec</code>. The returned reference can be use with any other map instance of the same kind. A registered type spec is validated during registration and the registration fails if it does not pass the validation. All functions that take a type specification as argument also accept a type specification reference, which is more efficient as there is no need to have the type specification in the local process memery and there is no need for further validation.</p><p>This call fails with exception <code>{invalid_spec, Errors :: map()}</code> if the type specification <code>Spec</code> is invalid.</p>The storage for specifications is implemented using <code>persistent_term</code>. So refer to that module's documentation to understand best practices. In particular, it is ideal to register the type specifications as soon as your aplication starts in order to minimize the number of processes on the node before performing a registration. It would also be wise to avoid registering type specifications when the system is at peak load.
  </section>
</section>
<section class="detail" id="remove/2">

  <div class="detail-header">
    <a href="#remove/2" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">remove(Key, T)</h1>

      <a href="https://github.com/leapsight/babel/blob/v0.3.11/src/babel_map.erl#L1160" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> remove(Key :: <a href="#t:key_path/0">key_path</a>(), T :: <a href="#t:t/0">t</a>()) -> NewT :: <a href="#t:maybe_no_return/1">maybe_no_return</a>(<a href="#t:t/0">t</a>()).</pre>

      </div>

<p>Removes a key and its value from the map. Removing a key that does not exist simply records a remove operation.</p>In case the map has no context i.e. it is newly created, removes will only %% work for keys that have been updated since creation. In all other cases the call will fail with a <code>context_required</code> exception.
  </section>
</section>
<section class="detail" id="set/3">

  <div class="detail-header">
    <a href="#set/3" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">set(Key, Value, Map)</h1>

      <a href="https://github.com/leapsight/babel/blob/v0.3.11/src/babel_map.erl#L956" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> set(Key :: <a href="#t:key_path/0">key_path</a>(), Value :: <a href="#t:value/0">value</a>(), Map :: <a href="#t:t/0">t</a>()) -> NewMap :: <a href="#t:maybe_no_return/1">maybe_no_return</a>(<a href="#t:t/0">t</a>()).</pre>

      </div>

<p>Associates <code>Key</code> with value <code>Value</code> and inserts the association into map <code>NewMap</code>. If key <code>Key</code> already exists in map <code>Map</code>, the old associated value is replaced by value <code>Value</code>. The function returns a new map <code>NewMap</code> containing the new association and the old associations in <code>Map</code>.</p><p>Passing a <code>Value</code> of <code>undefined` is equivalent to calling `remove(Key, Map)</code> with the difference that an exception will not be raised in case the map had no context assigned.</p>The call fails with a <code>{badmap, Term}</code> exception if <code>Map</code> or any value of a partial key path is not a babel map.
  </section>
</section>
<section class="detail" id="set_context/2">

  <div class="detail-header">
    <a href="#set_context/2" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">set_context(Ctxt, T)</h1>

      <a href="https://github.com/leapsight/babel/blob/v0.3.11/src/babel_map.erl#L562" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> set_context(Ctxt :: <a href="https://hexdocs.pm/riakc/riakc_datatype.html#t:context/0">riakc_datatype:context</a>(), T :: <a href="#t:t/0">t</a>()) -> NewT :: <a href="#t:t/0">t</a>().</pre>

      </div>

Sets the context <code>Ctxt</code>.
  </section>
</section>
<section class="detail" id="set_elements/3">

  <div class="detail-header">
    <a href="#set_elements/3" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">set_elements(Key, Values, Map)</h1>

      <a href="https://github.com/leapsight/babel/blob/v0.3.11/src/babel_map.erl#L1065" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> set_elements(Key :: <a href="#t:key_path/0">key_path</a>(), Values :: [<a href="#t:value/0">value</a>()], Map :: <a href="#t:t/0">t</a>()) -> NewMap :: <a href="#t:maybe_no_return/1">maybe_no_return</a>(<a href="#t:t/0">t</a>()).</pre>

      </div>

<p>Sets a list of values <code>Values</code> to a babel set associated with key or path <code>Key</code> in map <code>Map</code> and inserts the association into map <code>NewMap</code>. See <a href="babel_set.html#set_elements/2"><code>babel_set:set_elements/2</code></a>.</p><p>If the key <code>Key</code> does not exist in map <code>Map</code>, this function creates a new babel set containining <code>Values</code>.</p><p>The call might fail with the following exception reasons:</p>* <code>{badset, Set}</code> - if the initial value associated with <code>Key</code> in map <code>Map0</code> is not a babel set; * <code>{badmap, Map}</code> exception if <code>Map</code> is not a babel map. * <code>{badkey, Key}</code> - exception if no value is associated with <code>Key</code> or <code>Key</code> is not of type binary.
  </section>
</section>
<section class="detail" id="size/1">

  <div class="detail-header">
    <a href="#size/1" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">size(T)</h1>

      <a href="https://github.com/leapsight/babel/blob/v0.3.11/src/babel_map.erl#L416" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> size(T :: <a href="#t:t/0">t</a>()) -> non_neg_integer() | no_return().</pre>

      </div>

Returns the size of the values of the map <code>T</code>. The call fails with a <code>{badmap, T}</code> exception if <code>T</code> is not a map.
  </section>
</section>
<section class="detail" id="to_riak_op/1">

  <div class="detail-header">
    <a href="#to_riak_op/1" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">to_riak_op(Babel_map)</h1>

      <a href="https://github.com/leapsight/babel/blob/v0.3.11/src/babel_map.erl#L315" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

Extracts a Riak Operation from the map to be used with a Riak Client update request. The call fails with a <code>{badmap, T}</code> exception if <code>T</code> is not a map and <code>missing_spec</code> if it does not have a type specification reference.
  </section>
</section>
<section class="detail" id="to_riak_op/2">

  <div class="detail-header">
    <a href="#to_riak_op/2" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">to_riak_op(T, Spec)</h1>

      <a href="https://github.com/leapsight/babel/blob/v0.3.11/src/babel_map.erl#L331" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> to_riak_op(T :: <a href="#t:t/0">t</a>(), Spec :: <a href="#t:type_spec/0">type_spec</a>()) ->
              <a href="https://hexdocs.pm/riakc/riakc_datatype.html#t:update/1">riakc_datatype:update</a>(riakc_map:map_op()) | no_return().</pre>

      </div>

Extracts a Riak Operation from the map to be used with a Riak Client update request. The call fails with a <code>{badmap, T}</code> exception if <code>T</code> is not a map.
  </section>
</section>
<section class="detail" id="type/0">

  <div class="detail-header">
    <a href="#type/0" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">type()</h1>

      <a href="https://github.com/leapsight/babel/blob/v0.3.11/src/babel_map.erl#L406" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> type() -> map.</pre>

      </div>

Returns the symbolic name of this container.
  </section>
</section>
<section class="detail" id="type_spec_ref/1">

  <div class="detail-header">
    <a href="#type_spec_ref/1" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">type_spec_ref(T)</h1>

      <a href="https://github.com/leapsight/babel/blob/v0.3.11/src/babel_map.erl#L1335" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> type_spec_ref(T :: <a href="#t:t/0">t</a>()) -> <a href="#t:type_spec_ref/0">type_spec_ref</a>() | undefined.</pre>

      </div>

Returns the type specification reference associated with map <code>T</code> or <code>undefined</code> is there is none.
  </section>
</section>
<section class="detail" id="unregister_type_spec/1">

  <div class="detail-header">
    <a href="#unregister_type_spec/1" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">unregister_type_spec(Ref)</h1>

      <a href="https://github.com/leapsight/babel/blob/v0.3.11/src/babel_map.erl#L1314" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> unregister_type_spec(Ref :: any()) -> boolean().</pre>

      </div>


  </section>
</section>
<section class="detail" id="update/2">

  <div class="detail-header">
    <a href="#update/2" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">update(Values, T)</h1>

      <a href="https://github.com/leapsight/babel/blob/v0.3.11/src/babel_map.erl#L1084" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> update(Values :: <a href="babel_key_value.html#t:t/0">babel_key_value:t</a>(), T :: <a href="#t:t/0">t</a>()) -> NewT :: <a href="#t:t/0">t</a>().</pre>

      </div>

<p>Updates a map <code>T</code> with the provide key-value pairs <code>Values</code>. If the value associated with a key <code>Key</code> in <code>Values</code> is equal to <code>undefined` this equivalent to calling `remove(Key, Map)</code> with the difference that an exception will not be raised in case the map had no context assigned.</p>This function fails with <code>missing_spec</code> if it does not have a type specification reference. See <a href="#update/3"><code>update/3</code></a> to pass a type specification.
  </section>
</section>
<section class="detail" id="update/3">

  <div class="detail-header">
    <a href="#update/3" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">update(Values, T, Spec)</h1>

      <a href="https://github.com/leapsight/babel/blob/v0.3.11/src/babel_map.erl#L1101" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> update(Values :: <a href="babel_key_value.html#t:t/0">babel_key_value:t</a>(), T :: <a href="#t:t/0">t</a>(), Spec :: <a href="#t:type_spec/0">type_spec</a>()) -> NewT :: <a href="#t:t/0">t</a>().</pre>

      </div>

Updates a map <code>T</code> with the provide key-value pairs <code>Values</code>. If the value associated with a key <code>Key</code> in <code>Values</code> is equal to <code>undefined` this equivalent to calling `remove(Key, Map)</code> with the difference that an exception will not be raised in case the map had no context assigned.
  </section>
</section>
<section class="detail" id="validate_type_spec/1">

  <div class="detail-header">
    <a href="#validate_type_spec/1" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">validate_type_spec(Spec)</h1>

      <a href="https://github.com/leapsight/babel/blob/v0.3.11/src/babel_map.erl#L360" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> validate_type_spec(Spec :: <a href="#t:type_spec/0">type_spec</a>()) -> <a href="#t:type_spec/0">type_spec</a>() | no_return().</pre>

      </div>


  </section>
</section>
<section class="detail" id="value/1">

  <div class="detail-header">
    <a href="#value/1" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">value(Map)</h1>

      <a href="https://github.com/leapsight/babel/blob/v0.3.11/src/babel_map.erl#L582" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> value(Map :: <a href="#t:t/0">t</a>()) -> map() | no_return().</pre>

      </div>

Returns an external representation of the map <code>Map</code> as an Erlang map(). This is build recursively by calling the value/1 function on any embedded datatype. The call fails with a <code>{badmap, T}</code> exception if <code>T</code> is not a map.
  </section>
</section>

    </div>
  </section>

      <footer class="footer">
        <p>

            <span class="line">
              <a href="https://hex.pm/packages/babel/0.3.11" class="footer-hex-package">Hex Package</a>

              <a href="https://preview.hex.pm/preview/babel/0.3.11">Hex Preview</a>

                (<a href="https://preview.hex.pm/preview/babel/0.3.11/show/src/babel_map.erl">current file</a>)

            </span>

          <span class="line">
            <button class="a-main footer-button display-quick-switch" title="Search HexDocs packages">
              Search HexDocs
            </button>

              <a href="babel.epub" title="ePub version">
                Download ePub version
              </a>

          </span>
        </p>

        <p class="built-using">
          Built using
          <a href="https://github.com/elixir-lang/ex_doc" title="ExDoc" target="_blank" rel="help noopener" translate="no">ExDoc</a> (v0.29.1) for the

            <a href="https://erlang.org" title="Erlang" target="_blank" translate="no">Erlang programming language</a>

        </p>
      </footer>
    </div>
  </div>
</section>
</div>


  </body>
</html>
